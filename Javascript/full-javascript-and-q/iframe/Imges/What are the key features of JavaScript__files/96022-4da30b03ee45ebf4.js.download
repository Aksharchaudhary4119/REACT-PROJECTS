"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[96022],{98190:function(a,b,c){c.d(b,{YM:function(){return o},ZL:function(){return s},ZX:function(){return n},b9:function(){return t},bb:function(){return q},dD:function(){return p},fd:function(){return v},pf:function(){return r},wE:function(){return u}});var d=c(54551),e=c.n(d),f=c(10308),g=c(63575),h=c(67279),i=c(71653),j=c(90079);function k(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function l(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){k(f,d,e,g,h,"next",a)}function h(a){k(f,d,e,g,h,"throw",a)}g(void 0)})}}var m,n=function(){return(0,f.Z)({url:"/api/user/workflow/onboarding",type:"GET"})},o=function(){return(0,f.Z)({url:"/api/workflows/identifiers",type:"GET"})},p=function(){return(0,f.Z)({url:"/api/workflows/create_token",type:"GET"})},q=function(a){var b=a.pageId;return(0,f.Z)({url:"/api/workflows/client/page/".concat(b,"?work_type=").concat(i.dLO.ORG_WORKFLOW,"&document_type=").concat(i.qen.ORG_WORKFLOW_DOCUMENT),type:"GET"})},r=function(a){var b=a.pageId,c=a.ydoc,d=a.slate;return(0,f.Z)({url:"/api/workflows/document/".concat(b,"/dump"),data:{y_doc:c,page_content:d},type:"POST"})},s=function(a){var b=a.pageId,c=a.receiverId,d=a.type;return(0,f.Z)({url:"/api/workflows/nudge",data:{page_id:b,receiver_id:c,nudge_type:d},type:"POST"})},t=function(a){return(0,f.Z)({url:"/api/workflows/items",data:{item_ids_list:JSON.stringify(a)},type:"POST"})},u=function(a,b){return(0,h.Yd)(a,"/api/workflows/project/".concat(b,"/user-insights")).then(function(a){return JSON.parse(a)})},v=(m=l(e().mark(function a(b,c,d,f,h,i,k){var m;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return m={page_id:b,author_id:c,collection_id:d,organization_id:f,item:h,messages:i},a.abrupt("return",(0,g.yy)({endpoint:"devpath/ai/project-overview/user-action",method:"POST",body:JSON.stringify(m)}).then(function(){var a=l(e().mark(function a(b){return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.ok){a.next=2;break}throw Error();case 2:return a.next=4,(0,j.D)(b,function(){},k);case 4:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}()).catch(function(a){throw Error(a)}));case 2:case"end":return a.stop()}},a)})),function(a,b,c,d,e,f,g){return m.apply(this,arguments)})},71205:function(a,b,c){c.d(b,{Rj:function(){return i},fl:function(){return l},u2:function(){return j}});var d=c(8310),e=c(44101);function f(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function g(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(a,b){var c,d,e=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(i){h=!0,d=i}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}}(a,b)||h(a,b)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(a,b){if(a){if("string"==typeof a)return f(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return f(a,b)}}var i={doesPageHaveCustomStyles:!1,headingsValidationResult:{areHeadingsNormalized:!0,errors:[],headingTree:void 0},saveStatus:e.G.SUCCESS,usersMetadata:{},lastUpdatedBy:null},j={saveStatus:e.G.SUCCESS},k=function(a){if(b=a,null!=(c=d.aC)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?!!c[Symbol.hasInstance](b):b instanceof c)return a;var b,c,e=new Map(Object.entries(a.sv).map(function(a){var b=g(a,2),c=b[0],d=b[1];return[Number(c),d]})),f=new Map(Object.entries(a.ds.clients).map(function(a){var b=g(a,2),c=b[0],d=b[1];return[Number(c),d,]}));return d.Ox({clients:f},e)},l=function(a,b){if(!b)return!1;var c,e,f=k(b),g=a.clientID,h=a.store.clients.get(g);if(!h)return!1;if(!f.sv.get(g))return!0;var i=h[h.length-1];if(i.id.clock+i.length>f.sv.get(g))return!0;var j=(0,d.Vc)({clients:new Map([[g,h]]),pendingDs:a.store.pendingDs,pendingStructs:a.store.pendingStructs}),l=f.ds;return!!j.clients.has(g)&&(!l.clients.get(g)||(null===(c=j.clients.get(g))|| void 0===c?void 0:c.length)>l.clients.get(g).length||(null===(e=j.clients.get(g))|| void 0===e?void 0:e.some(function(a,b){var c=l.clients.get(g)[b];return!c||a.clock!==c.clock||a.len!==c.len})))}},73120:function(a,b,c){c.d(b,{Iq:function(){return o},XG:function(){return r},cX:function(){return n},eI:function(){return q},fC:function(){return p},yA:function(){return m}});var d=c(73242),e=c(44178),f=c(83249),g=c(71115),h=c(8310),i=c(96022),j=c(40563),k=c(23445),l=function(a){return"SELECTED_WIDGET_".concat(a)},m=function(a,b,c){e.og.storePosition(a,l(b),g.ML.start(a,[c]))},n=function(a,b){e.og.removeStoredPosition(a,l(b))},o=function(a,b){var c=(0,i.ZP)(!0),d=c.provider.document,g=c.uid,k=(0,f.useState)(-1),m=k[0],n=k[1],o=(0,f.useCallback)(function(){var b,c;n(null!==(c=null===(b=e.og.position(a,l(g)))|| void 0===b?void 0:b.path[0])&& void 0!==c?c:-1)},[a,g]);return(0,j.gb)(d.get(b,h.eI),o,!0),m},p=function(a,b){var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{};a.sendStateless(JSON.stringify({id:null,type:b,message:c}))},q=function(a,b,c){var e=arguments.length>3&& void 0!==arguments[3]?arguments[3]:10;return new Promise(function(f,g){var h=function(b){var c,d,e,k=JSON.parse(b.payload);k.id&&j===k.id&&(k.success?f(k.data):g({message:null!==(e=null==k?void 0:null===(c=k.data)|| void 0===c?void 0:c.msg)&& void 0!==e?e:"Some error occurred while processing your request.",errorCode:null==k?void 0:null===(d=k.data)|| void 0===d?void 0:d.errorCode}),a.off("stateless",h),clearTimeout(i))};a.on("stateless",h);var i=setTimeout(function(){a.off("stateless",h),g(Error("No response from server"))},1e3*e),j=(0,d.x0)(10);a.sendStateless(JSON.stringify({id:j,type:b,message:c}))})},r=function(a,b){return p(b,k.gH.EXTEND_USER_TOKEN,{refreshToken:a})}},96022:function(a,b,c){c.d(b,{"$o":function(){return af},Br:function(){return ad},C4:function(){return aj},Ci:function(){return Y},Ep:function(){return ak},Gw:function(){return ah},KG:function(){return aa},Rv:function(){return ab},Sz:function(){return $},Vx:function(){return ag},XG:function(){return ai},YE:function(){return d},nW:function(){return e},oR:function(){return _},t4:function(){return Z}});var d,e,f=c(54551),g=c.n(f),h=c(2696),i=c(51349),j=c(83249),k=c(83128),l=c(8310),m=c(98190),n=c(71205),o=c(73120),p=c(41830),q=c(5920),r=c(23445),s=c(35177),t=c(67481),u=c(71653),v=c(35239),w=c(4573),x=c(67742),y=c(31414),z=c(54027),A=c(20110);function B(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function C(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function D(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){C(f,d,e,g,h,"next",a)}function h(a){C(f,d,e,g,h,"throw",a)}g(void 0)})}}function E(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}function F(a,b,c){return(F=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}()?function(a,b,c){var d=[null];d.push.apply(d,b);var e=new(Function.bind.apply(a,d));return c&&M(e,c.prototype),e}:Reflect.construct).apply(null,arguments)}function G(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function H(a,b,c){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){var d=O(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}})(a,b,c||a)}function I(a){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function J(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&M(a,b)}function K(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){G(a,b,c[b])})}return a}function L(a,b){return b=null!=b?b:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):(function(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);c.push.apply(c,d)}return c})(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))}),a}function M(a,b){return(M=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function N(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(a,b){var c,d,e=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(i){h=!0,d=i}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}}(a,b)||Q(a,b)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&null!==(a=I(a)););return a}function P(a){return function(a){if(Array.isArray(a))return B(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||Q(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(a,b){if(a){if("string"==typeof a)return B(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return B(a,b)}}function R(a){var b="function"==typeof Map?new Map:void 0;return(R=function(a){var c;if(null===a||(c=a,-1===Function.toString.call(c).indexOf("[native code]")))return a;if("function"!=typeof a)throw TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,d)}function d(){return F(a,arguments,I(this).constructor)}return d.prototype=Object.create(a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),M(d,a)})(a)}function S(a){var b=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}();return function(){var c,d,e,f,g=I(a);if(b){var h=I(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return d=this,(e=f)&&("object"==(c=e,c&&"undefined"!=typeof Symbol&&c.constructor===Symbol?"symbol":typeof c)||"function"==typeof e)?e:function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)}}var T,U,V="ExpiredToken",W=function(a){J(c,a);var b=S(c);function c(a,d){var e;return E(this,c),(e=b.call(this,a)).statusCode=d,e}return c}(R(Error)),X=function(){return(0,j.createContext)(null)},Y=X(),Z=X(),$=X(),_=X(),aa=X(),ab=(0,j.createContext)(null),ac=function(a,b){var c=(0,j.useContext)(a);if(b&&null==c)throw Error("The `useHocuspocus` hook must be used inside the <HocuspocusProvider> component's context.");return c},ad=function(a,b){return ac(a,b)},ae=function(a){return ac(Z,a)},af=function(a){return ac($,a)},ag=function(a){return ac(_,a)},ah=function(a){return ac(aa,a)},ai=function(){return(0,j.useContext)(ab)};(T=d||(d={})).CONNECTED="connected",T.DISCONNECTED="disconnected",T.CONNECTING="connecting",(U=e||(e={})).ARTICLE="article",U.COLLECTION="collection",U.PRIVATE="private";var aj=function(a,b,c,f,B,C,F,G,M,O){var Q,T,U=arguments.length>10&& void 0!==arguments[10]&&arguments[10],X=arguments.length>11&& void 0!==arguments[11]?arguments[11]:{},Y=arguments.length>12&& void 0!==arguments[12]&&arguments[12],Z=arguments.length>13&& void 0!==arguments[13]&&arguments[13],$=arguments.length>14&& void 0!==arguments[14]&&arguments[14],_=(0,q.X)(),aa=(0,j.useState)(!1),ab=aa[0],ac=aa[1],ad=(0,j.useState)(!1),ae=ad[0],af=ad[1],ag=(0,j.useState)(!1),ah=ag[0],ai=ag[1],aj=(0,j.useState)(),ak=aj[0],al=aj[1],am=(0,j.useState)(d.CONNECTING),an=am[0],ao=am[1],ap=(0,j.useMemo)(function(){return new l.QW},[a]),aq=(0,j.useRef)(!1),ar=(0,j.useState)(u.hPL.PENDING),as=ar[0],at=ar[1],au=A.env.REACT_APP_STANDALONE?Number(null!==(Q=x.rV("hocuspocusPort"))&& void 0!==Q?Q:w.sC):w.sC,av=(0,j.useRef)(),aw=(0,j.useRef)({snapshot:null}),ax=Y?ae||ah:ae,ay=w.r3?null:f,az=(0,j.useRef)(function(){}),aA=(0,j.useRef)(!1),aB=(0,j.useRef)(!0),aC=(0,j.useMemo)(function(){var e=function(a){J(c,a);var b=S(c);function c(){return E(this,c),b.apply(this,arguments)}return c.prototype.close=function(){for(var a,b=arguments.length,d=Array(b),e=0;e<b;e++)d[e]=arguments[e];console.trace("WS.close() Called"),(a=H(I(c.prototype),"close",this)).call.apply(a,[this].concat(P(d)))},c}(R(WebSocket));return new h.cA({url:(0,w.AQ)(au),connect:!1,factor:1.1,maxAttempts:0,maxDelay:3e3,onConnect:function(){console.log("connected",a,O),ao(d.CONNECTED),aq.current=!0},messageReconnectTimeout:1e4,parameters:L(K(L(K({},X),{user_id:C,uid:F,roomType:b}),O?{document_type:O}:{}),{work_type:c,version:p.X1}),onClose:function(a){3001!==a.event.code&&O!==u.sLn.ORG_WORKFLOW_WORKSPACE&&ao(d.DISCONNECTED),G(a)},onStatus:function(a){a.status===h.X0.Connecting&&an!==d.CONNECTING&&ao(d.CONNECTING)},WebSocketPolyfill:e})},[C,F,b,O,c,ap,au,ab,]),aD=(0,j.useMemo)(function(){return new h.Ui({websocketProvider:aC,name:a,forceSyncInterval:1e4,onAuthenticationFailed:function(a){if((null==a?void 0:a.reason)!==V)return M(a)},onSynced:function(a){a.state?at(u.hPL.WAITING_FOR_YDOC):at(u.hPL.PENDING)},token:w.r3?"dummy-token":null!=B?B:f,document:ap})},[aC,ay]),aE=(0,j.useMemo)(function(){return $?new l.OP(ap):null},[ap,$]);(0,j.useEffect)(function(){var a=function(a,b,c,d){if(!d.local||!aE||aA.current)return null;aE.setUserMapping(ap,ap.clientID,C.toString()),aA.current=!0};return ap.on("update",a),function(){ap.off("update",a)}},[ap,$,aE,C]),(0,j.useEffect)(function(){w.yF&&(A.env.REACT_APP_STANDALONE||(0,v.a8)())&&fetch(w.jx).then(function(){return ac(!0)})},[]),(0,j.useEffect)(function(){if(Y&&!ah&&O&&c===u.dLO.ORG_WORKFLOW&&O===u.qen.ORG_WORKFLOW_DOCUMENT){var b=!1,d=N(a.split("_"),3)[2],e=(0,z.rV)(d);if(e){var f=(0,s.$)(e),g=f.isNew,h=f.docVersion;if(g){av.current=h,aw.current={snapshot:l.CO(ap)},ai(!0);return}(0,z.cl)(d)}return(0,m.bb)({pageId:d}).then(JSON.parse).then(function(a){var c=a.page_title,d=a.is_ydoc,e=a.page_content,f=a.ydoc_version;if(!b&&d){av.current=f;var g=(0,i._f)(e);(0,l.NG)(ap,g),aw.current={snapshot:l.CO(ap)},ai(!0),al(c)}}).catch(function(b){(null==b?void 0:b.status)&&[t.Wy.accessDeniedException,t.Wy.notFoundException,].includes(b.status)||(0,y.uX)(b,{documentName:a,documentType:O})}),function(){b=!0}}},[ah,ap,a,O,Y,c,]);var aF,aG=(0,j.useCallback)((T=D(g().mark(function b(c,d){return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(b.prev=0,_){b.next=3;break}return b.abrupt("return");case 3:return b.next=5,_.put("ydoc_patches",{id:"patch_".concat(a,"_").concat(F),documentName:a,patch:c,version:d});case 5:b.next=10;break;case 7:b.prev=7,b.t0=b.catch(0),(0,y.uX)(b.t0,{documentName:a,documentType:O});case 10:case"end":return b.stop()}},b,null,[[0,7]])})),function(a,b){return T.apply(this,arguments)}),[_,a,O,F]),aH=(0,j.useCallback)((aF=D(g().mark(function d(e,h){var j,k,m,n,o,q,r,s,t,u,v,x,y;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(null==h||!_)){d.next=2;break}return d.abrupt("return");case 2:return d.next=4,_.getAllFromIndex("ydoc_patches","documentName",IDBKeyRange.only(a));case 4:return j=d.sent,k=aD.document,n=(m=N(a.split("_",3),3))[0],o=m[1],q=m[2],r=null!=B?B:f,s=(0,i.kZ)(l.gJ(k)),t=l.CO(k),d.next=12,fetch("".concat((0,w.cy)(),"/api/save-document?user_id=").concat(C,"&author_id=").concat(n,"&collection_id=").concat(o,"&page_id=").concat(q,"&work_type=").concat(c,"&document_type=").concat(O,"&room_type=").concat(b,"&version=").concat(p.X1),{method:"POST",body:JSON.stringify({patch:e,version:h,sv:s,token:r}),keepalive:!0});case 12:if(!(200!==(u=d.sent).status)){d.next=20;break}return d.t0=W,d.next=17,u.text();case 17:throw d.t1=d.sent,d.t2=u.status,new d.t0(d.t1,d.t2);case 20:return d.t3=JSON,d.next=23,u.text();case 23:return d.t4=d.sent,x=(v=d.t3.parse.call(d.t3,d.t4)).patch,l.NG(k,(0,i._f)(x)),aw.current={snapshot:t},y=_.transaction("ydoc_patches","readwrite"),j.forEach(function(a){var b=a.id;y.store.delete(b)}),d.abrupt("return",y.done);case 31:case"end":return d.stop()}},d)})),function(a,b){return aF.apply(this,arguments)}),[_,a,O,aD,f,B,b,C,c,]),aI=(0,j.useCallback)(D(g().mark(function b(){var c,d,e,f,h,j,k;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!Z||!ax)){b.next=2;break}return b.abrupt("return");case 2:if(null!=(e=null!==(d=(c=aD.document).getMap("metadata").get("version"))&& void 0!==d?d:av.current)){b.next=7;break}return b.abrupt("return");case 7:return f=null,h=!1,b.prev=9,f=(0,i.kZ)(l.D$(c,aw.current.snapshot?l.gJ(aw.current.snapshot.sv):void 0)),b.next=13,aH(f,e);case 13:b.next=20;break;case 15:b.prev=15,b.t0=b.catch(9),(j=!("statusCode"in b.t0)||b.t0.statusCode!==t.Wy.versionMismatch)&&(0,y.uX)(b.t0,{documentName:a,documentType:O}),h=!0;case 20:return b.prev=20,k=(0,n.fl)(c,aw.current.snapshot),h&&f&&k&&aG(f,e),aD.emit("local_event",JSON.stringify({type:r.Ls.DIRTY,dirty:k})),b.finish(20);case 25:case"end":return b.stop()}},b,null,[[9,15,20,25]])})),[Z,ax,aH,a,O,aG,aD,]),aJ=(0,j.useCallback)(D(g().mark(function b(){var c,d,e,f,h;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!Z||!ax)){b.next=2;break}return b.abrupt("return");case 2:if(b.prev=2,c=aD.document,d=(0,i.kZ)(l.D$(c,aw.current.snapshot?l.gJ(aw.current.snapshot.sv):void 0)),f=null!==(e=c.getMap("metadata").get("version"))&& void 0!==e?e:av.current,!(0,w.Zv)(aD,an)){b.next=9;break}return b.abrupt("return");case 9:if(!(0,n.fl)(c,aw.current.snapshot)){b.next=13;break}return b.next=12,aG(d,f);case 12:aH(d,f);case 13:b.next=19;break;case 15:b.prev=15,b.t0=b.catch(2),(h=!("statusCode"in b.t0)||505!==b.t0.statusCode)&&(0,y.uX)(b.t0,{documentName:a,documentType:O});case 19:case"end":return b.stop()}},b,null,[[2,15]])})),[Z,an,a,O,aD,ax,aH,aG,]);(0,j.useEffect)(function(){return window.addEventListener("beforeunload",aJ),az.current=aJ,function(){return window.removeEventListener("beforeunload",aJ)}},[aJ]),(0,j.useEffect)(function(){return function(){az.current()}},[]),(0,j.useEffect)(function(){if(Z&&ax&&_){var b=aD.document;_.getAllFromIndex("ydoc_patches","documentName",IDBKeyRange.only(a)).then(function(a){return a.forEach(function(a){a.id;var c=a.patch,d=a.version;av.current===d&&l.NG(b,(0,i._f)(c))})}).catch(function(b){return(0,y.uX)(b,{documentName:a,documentType:O})})}},[Z,ax,_,a,O,aD,]),(0,j.useEffect)(function(){if(Z){var a=setInterval(function(){(0,w.Zv)(aD,an)||aI()},1e3*((0,v.a8)()?30:10));return function(){return clearInterval(a)}}},[Z,an,aD,aI]),(0,j.useEffect)(function(){aD.status===h.X0.Connected&&B&&B!==f&&(0,o.XG)(B,aD)},[B]);var aK=(0,j.useCallback)(function(){var b,c=aD.configuration.websocketProvider;c.shouldConnect=!1;try{null===(b=c.webSocket)|| void 0===b||b.close(3001,"Closed By Client")}catch(d){(0,y.uX)(d,{documentName:a,documentType:O},{userId:C.toString()})}},[aD]),aL=(0,j.useCallback)(function(){var b=N(a.split("_",3),3),c=b[0],d=b[1],e=b[2];return"".concat(c,"_").concat(d,"_").concat(e,"_").concat(C)},[a,C]),aM=(0,j.useCallback)(function(c,d){if(d&&d===aD&&Array.from(aD.document.share.keys()).length>0&&at(u.hPL.SYNCED),Array.from(aD.document.share.keys()).length>0&&af(!0),b===e.PRIVATE&&_)try{var f=new l.QW;aD.document.share.forEach(function(a,b){var c=aD.document.getMap(b),d=f.getMap(b);c.forEach(function(a,b){var c,e;d.set(b,(c=a,e=l.QP,null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](c):c instanceof e)?a.clone():a)})});var g=(0,i.kZ)(l.D$(f));_.put("global_toc_patches",{document:g,id:aL()})}catch(h){console.error(h),(0,y.uX)(h,{documentName:a,documentType:O},{userId:C.toString()})}},[aD,_,a,O,b,C,aL,]);(0,j.useEffect)(function(){var a=function(){U||("hidden"===document.visibilityState?aC.shouldConnect=!1:(aC.shouldConnect=!0,aC.connect()))};return document.addEventListener("visibilitychange",a),function(){document.removeEventListener("visibilitychange",a)}},[aC,U]),(0,j.useEffect)(function(){if(!U)return aD.connect().catch(function(a){console.error(a)}),function(){aK(),af(!1),ai(!1)}},[aD,U,aK]),(0,j.useEffect)(function(){return aD.document.on("update",aM),function(){aD.document.off("update",aM)}},[aD,aM]),(0,j.useEffect)(function(){C&&aD.awareness.setLocalState({user_id:C,arrival_time:Date.now(),uid:F})},[aD.awareness,C,F]),(0,j.useEffect)(function(){window.removeEventListener("beforeunload",aD.boundPageUnload);var a=function(){(0,k.Ag)(aD.awareness,[aD.document.clientID],"window unload")};return window.addEventListener("unload",a),function(){window.removeEventListener("unload",a)}},[aD.document,aD.awareness]);var aN=(0,j.useCallback)(function(){aD.connect().catch(function(a){console.error(a)})},[aD]);return(0,j.useEffect)(function(){var a=aD.awareness.on;aD.awareness.on=function(b,c){return"change"===b?a.call(aD.awareness,b,function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];try{c.apply(void 0,P(b))}catch(e){(0,y.uX)(e),console.error(e)}}):a(b,c)}},[aD]),(0,j.useEffect)(function(){if(!(0,v.a8)()||!aB.current)return function(){ap.destroy(),aD.configuration.websocketProvider.destroy(),aD.destroy()}},[ap,aD]),(0,j.useEffect)(function(){aB.current&&(aB.current=!1)},[]),{hpProvider:aD,uid:F,documentLoaded:ax,connectionState:an,connect:aN,syncStatus:as,userData:aE,initialPageTitle:ak}},ak=function(a){var b,c=null!=a?a:{},f=c.authorId,g=c.collectionId,i=c.workType,k=c.pageId,l=c.documentType,m=c.roomType,n=void 0===m?e.COLLECTION:m,o=c.token,q=c.onAuthenticationFailed,r=c.throwError,s=(0,j.useRef)({}),t=(0,j.useRef)({}),v=ai();if(null==v){if(void 0!==r&&r)throw Error("The `useFromSocketsLRU` hook must be used inside the <SocketsLRU> component's context.");return}var x=v.userId,y=v.uid,z=v.maxConnectedSockets,A=v.connectedSocketsRef,B=v.allSocketsMap,C=v.setAllSocketsMap;if(t.current=B,!(z<=0)&&a){var D="".concat(f,"_").concat(g).concat(k?"_".concat(k):""),E=t.current[D];if(E)return E;var F=function(a,b){C(function(c){return L(K({},c),G({},a,K({},c[a],b)))})},H=function(a){var b=A.current,c=b.indexOf(a);-1!==c&&b.splice(c,1)},I=new h.cA({connect:!1,factor:1.1,maxAttempts:0,onConnect:function(){var a=A.current;if(s.current[D]=0,F(D,{connectionState:d.CONNECTED}),a.length===z){var b=a.shift();t.current[b].hpProvider.configuration.websocketProvider.disconnect()}a.push(D)},parameters:{user_id:x,uid:y,roomType:n,document_type:l,work_type:i,version:p.X1},url:(0,w.AQ)(),onClose:function(a){var b=s.current[D]||0;s.current[D]=b+1,b>=0&&(H(D),F(D,{connectionState:d.DISCONNECTED}))},onDisconnect:function(){H(D),F(D,{connectionState:d.DISCONNECTED,documentLoaded:!1})},onStatus:function(a){a.status===h.X0.Connecting&&F(D,{connectionState:d.CONNECTING})}}),J=new h.Ui({name:D,onAuthenticationFailed:function(a){if((null==a?void 0:a.reason)!==V){var b,c;F(D,{shouldConnect:!1}),null==J||null===(b=J.configuration)|| void 0===b||null===(c=b.websocketProvider)|| void 0===c||c.disconnect()}return q(a)},onSynced:function(){F(D,{documentLoaded:!0})},websocketProvider:I,token:o});return F(D,{hpProvider:J,uid:y,documentLoaded:!1,syncStatus:u.hPL.PENDING,connectionState:d.DISCONNECTED,shouldConnect:!0,connect:function(){s.current[D]=0,J.connect().catch(function(a){console.error(a)})}}),null!==(b=t.current[D])&& void 0!==b?b:null}};b.ZP=ae},40563:function(a,b,c){c.d(b,{MI:function(){return A},Ny:function(){return w},XR:function(){return v},Yy:function(){return z},dK:function(){return C},gb:function(){return u},iM:function(){return t},s1:function(){return x},z6:function(){return B}});var d=c(54551),e=c.n(d),f=c(83249),g=c(66985),h=c(31008),i=c(8310),j=c(70836),k=c(98190),l=c(96723),m=c(31414),n=c(41830);function o(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function p(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function q(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){p(f,d,e,g,h,"next",a)}function h(a){p(f,d,e,g,h,"throw",a)}g(void 0)})}}var r,s=(r=q(e().mark(function a(b,c){var d,f=arguments;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=f.length>2&& void 0!==f[2]&&f[2],a.abrupt("return",new Promise(function(a,f){var h=g.operation({forever:!0,minTimeout:100,maxTimeout:3e3});h.attempt(q(e().mark(function g(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d?(0,k.dD)():(0,j.WB)(b,c);case 3:return i=e.sent,e.abrupt("return",a(i));case 7:e.prev=7,e.t0=e.catch(0),Number.isInteger(null===e.t0|| void 0===e.t0?void 0:e.t0.code)&&4===Math.floor(e.t0.code/100)?(h.stop(),f(e.t0)):h.retry(Error("Network failure or timeout"));case 10:case"end":return e.stop()}},g,null,[[0,7]])})))}));case 2:case"end":return a.stop()}},a)})),function(a,b){return r.apply(this,arguments)}),t=function(a,b,c){var d=arguments.length>3&& void 0!==arguments[3]&&arguments[3],g=(0,f.useState)(),h=g[0],i=g[1],j=(0,f.useState)(),k=j[0],o=j[1],p=(0,f.useRef)(!1),r=(0,f.useRef)(0),t=(0,f.useRef)(null),u=(0,f.useState)(void 0),v=u[0],w=u[1],x=(0,f.useCallback)(q(e().mark(function c(){var f,g,h,j,k=arguments;return e().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(f=k.length>0&& void 0!==k[0]&&k[0],c.prev=1,g=p.current,h=Date.now()-r.current<n.ro,!(g||h)){c.next=7;break}return console.warn("Skipping token fetch request as another request is in progress or has completed recently",{isWorkflow:d,authorId:a,collectionId:b,isRefresh:f,fetchInProgress:g,fetchCompletedRecently:h}),c.abrupt("return");case 7:return f||(p.current=!0),c.next=10,s(a,b,d);case 10:j=c.sent,f?o(j):(i(j),o(null),r.current=Date.now()),t.current&&clearTimeout(t.current),t.current=setTimeout(function(){return x(!0)},n.KP),c.next=20;break;case 16:c.prev=16,c.t0=c.catch(1),(0,m.uX)(c.t0,{message:"Error fetching or refreshing access token",isRefresh:f,isWorkflow:d,authorId:a,collectionId:b}),f||w((0,l.C)());case 20:return c.prev=20,p.current=!1,c.finish(20);case 23:case"end":return c.stop()}},c,null,[[1,16,20,23]])})),[a,b,d]);return(0,f.useEffect)(function(){return Boolean(a)&&Boolean(b)&&x(),function(){t.current&&clearTimeout(t.current)}},[a,b,d]),{hpUserToken:h,errorPageData:v,setErrorPageData:w,refreshToken:k,fetchAccessToken:x}},u=function(a,b){var c=arguments.length>2&& void 0!==arguments[2]&&arguments[2],d=(0,f.useRef)(!1);(0,f.useEffect)(function(){var e="function"==typeof a?a():a,f=function(){return b(e)};return a&&e&&(c?e.observeDeep(f):e.observe(f),d.current&&b(e)),d.current||(d.current=!0),function(){e&&(c?e.unobserveDeep(f):e.unobserve(f))}},[b,"function"!=typeof a&&a,c,])},v=function(a,b){var c,d=arguments.length>2&& void 0!==arguments[2]&&arguments[2],e=arguments.length>3&& void 0!==arguments[3]?arguments[3]:void 0,g=arguments.length>4&& void 0!==arguments[4]?arguments[4]:{},h=(0,f.useState)(function(){var d;return null!==(c=null==a?void 0:null===(d=a.map)|| void 0===d?void 0:d.call(a,b))&& void 0!==c?c:[]}),i=h[0],j=h[1];return u(a,(0,f.useCallback)(function(a){if(e&&a.length>e){a.delete(e,a.length-e);return}j(a.map(b))},[]),d),(0,f.useEffect)(function(){!a&&(null==g?void 0:g.default)&&j(g.default)},[a,null==g?void 0:g.default]),i},w=function(a,b){var c=arguments.length>2&& void 0!==arguments[2]&&arguments[2],d=(0,f.useState)(function(){return b("function"==typeof a?a():a)}),e=d[0],g=d[1];return u(a,(0,f.useCallback)(function(a){g(function(c){return b(a,c)})},[]),c),e},x=function(a){var b=(0,f.useState)(a.size>0),c=b[0],d=b[1];return u(a,(0,f.useCallback)(function(a){d(a.size>0)},[])),c},y=function(a){var b,c;return Array.isArray(a)||["number","boolean"].includes(void 0===a?"undefined":(c=a)&&"undefined"!=typeof Symbol&&c.constructor===Symbol?"symbol":typeof c)?a:null==a?void 0:null===(b=a.toString)|| void 0===b?void 0:b.call(a)},z=function(a,b){var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:y,d=null==a?void 0:a.get(b),e=(0,f.useState)(function(){return c(d)}),g=e[0],h=e[1];return u(a,(0,f.useCallback)(function(a){if(b){var d=null==a?void 0:a.get(b);h(function(){return c(d)})}},[b])),g},A=function(a){var b,c=(0,f.useState)(function(){return null!==(b=null==a?void 0:a.toString())&& void 0!==b?b:void 0}),d=c[0],e=c[1];return u(a,(0,f.useCallback)(function(a){e(a.toString())},[])),d},B=function(a){var b=(0,f.useRef)(),c=(0,f.useRef)(),d=(0,f.useCallback)(function(){c.current&&(c.current.destroy(),c.current=null),b.current&&a&&(c.current=new h.G(a,b.current))},[a]);return(0,f.useEffect)(function(){return d(),function(){var a;null===(a=c.current)|| void 0===a||a.destroy()}},[d]),(0,f.useCallback)(function(a){b.current=a,d()},[d])},C=function(a,b){if(b||(b=[]),null==a||"boolean"==typeof a||"number"==typeof a)return a;if(Array.isArray(a))return i.mJ.from(a.map(function(a){return C(a,b)}));if("object"!=typeof a)return new i.xv(a.toString());var c=new i.D5;return Object.entries(a).forEach(function(a){var d,e,f=(e=2,function(a){if(Array.isArray(a))return a}(d=a)||function(a,b){var c,d,e=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=e){var f=[],g=!0,h=!1;try{for(e=e.call(a);!(g=(c=e.next()).done)&&(f.push(c.value),!b||f.length!==b);g=!0);}catch(i){h=!0,d=i}finally{try{g||null==e.return||e.return()}finally{if(h)throw d}}return f}}(d,e)||function a(b,c){if(b){if("string"==typeof b)return o(b,c);var d=Object.prototype.toString.call(b).slice(8,-1);if("Object"===d&&b.constructor&&(d=b.constructor.name),"Map"===d||"Set"===d)return Array.from(d);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return o(b,c)}}(d,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=f[0],h=f[1],i=b[b.length-1];b.push(g),c.set(g,["page_tags"].includes(i)?h:C(h,b)),b.pop()}),c}},41830:function(a,b,c){c.d(b,{Br:function(){return d},KP:function(){return e},M:function(){return i},X1:function(){return g},o8:function(){return h},ro:function(){return f}});var d=["TableHTML"],e=15e5,f=1e4,g=17,h=[" ","\n"],i=["TableV2"]},44101:function(a,b,c){var d,e;c.d(b,{G:function(){return d}}),(e=d||(d={})).SUCCESS="SUCCESS",e.FAILURE="FAILURE",e.IN_PROGRESS="SAVING"},5920:function(a,b,c){c.d(b,{X:function(){return h}});var d=c(91515),e=c(83249),f=c(31414),g=function(a,b){switch(b){case 0:a.createObjectStore("ydoc_patches",{keyPath:"id"}).createIndex("documentName","documentName",{unique:!1});case 1:a.createObjectStore("global_toc_patches",{keyPath:"id"});break;default:(0,f.uX)(Error("Unknown DB version: ".concat(b)))}},h=function(){var a=(0,e.useState)(null),b=a[0],c=a[1],f=(0,e.useCallback)(function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:0;(0,d.X3)("DefaultDB",2,{upgrade:g}).then(function(a){return c(a)}).catch(function(){a<3&&f(a++)})},[]);return(0,e.useEffect)(function(){"indexedDB"in window&&f()},[f]),(0,e.useEffect)(function(){if(b){var a=function(){Promise.resolve().then(function(){return f()})};return b.addEventListener("close",a),function(){b.removeEventListener("close",a)}}},[f,b]),b}},35177:function(a,b,c){c.d(b,{"$":function(){return e},T:function(){return d}});var d=11e3,e=function(a){if(!a)return{isNew:!1};var b=JSON.parse(a),c=new Date(b.creationTime),e=new Date,f=e.getTime()-c.getTime();return f<d?{isNew:!0,docVersion:b.docVersion}:{isNew:!1}}},67279:function(a,b,c){c.d(b,{Qq:function(){return g},UT:function(){return i},Yd:function(){return f},aX:function(){return k},gr:function(){return h},yC:function(){return j}});var d=c(10308),e=c(3309),f=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"/api/multi-search";return(0,d.Z)({data:{mutli_search:JSON.stringify(a.map(function(a){var b=a.conditionalFilters,c=a.currentPage,d=a.engineName,f=a.excludeFilters,g=a.excludeSearchFields,h=a.facets,i=a.groupField,j=a.includeFilters,k=a.includeSearchFields,l=a.rangeFilters,m=a.recordAnalytics,n=a.resultFields,o=a.resultsPerPage,p=a.searchString,q=a.sortFilter,r=a.tags,s=a.groupSortFilter;return{conditional_filters:JSON.stringify(b.map(function(a){var b=a.field,c=a.values;return{field:b,values:JSON.stringify(c)}})),current_page:c,engine_name:d,exclude_filters:JSON.stringify(f.map(function(a){var b=a.field,c=a.values;return{field:b,values:JSON.stringify(c)}})),exclude_search_fields:JSON.stringify(void 0===g?[]:g),facets:JSON.stringify(h),group_field:i,include_filters:JSON.stringify(j.map(function(a){var b=a.field,c=a.values;return{field:b,values:JSON.stringify(c)}})),include_search_fields:JSON.stringify(void 0===k?[]:k),record_analytics:m,results_per_page:o,search_string:p.slice(0,e.dI),tags:JSON.stringify(r),range_filters:JSON.stringify((void 0===l?[]:l).map(function(a){var b=a.field,c=a.value;return{field:b,value:JSON.stringify(c)}})),sort_filter:JSON.stringify(void 0===q?[]:q),result_fields:JSON.stringify(void 0===n?[]:n),group_sort_filter:JSON.stringify(void 0===s?[]:s)}}))},type:"POST",url:b})},g=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"/api/multi-search";return f(a,b).then(function(a){return JSON.parse(a)})},h=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"/api/overdue-alert/multi-search";return f(a,b).then(function(a){return JSON.parse(a)})},i=function(a){var b=a.clickIndex,c=a.documentId,e=a.documentType,f=a.engineName,g=a.recordType,h=a.results,i=a.searchString;return(0,d.Z)({data:{click_index:b,document_id:c,document_type:e,engine_name:f,record_type:g,results:h,search_string:i},type:"POST",url:"/api/search-analytics"})},j=function(a){var b=a.conditionalFilters,c=a.currentPage,f=a.engineName,g=a.excludeFilters,h=a.excludeSearchFields,i=a.facets,j=a.groupField,k=a.includeFilters,l=a.includeSearchFields,m=a.recordAnalytics,n=a.resultsPerPage,o=a.searchString,p=a.sortFilter,q=a.tags,r=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"/api/search";return(0,d.Z)({data:{conditional_filters:JSON.stringify(b.map(function(a){var b=a.field,c=a.values;return{field:b,values:JSON.stringify(c)}})),current_page:c,engine_name:f,exclude_filters:JSON.stringify(g.map(function(a){var b=a.field,c=a.values;return{field:b,values:JSON.stringify(c)}})),exclude_search_fields:JSON.stringify(void 0===h?[]:h),facets:JSON.stringify(i),group_field:j,include_filters:JSON.stringify(k.map(function(a){var b=a.field,c=a.values;return{field:b,values:JSON.stringify(c)}})),include_search_fields:JSON.stringify(void 0===l?[]:l),record_analytics:m,results_per_page:n,search_string:o.slice(0,e.dI),sort_filter:JSON.stringify(void 0===p?[]:p),tags:JSON.stringify(void 0===q?[]:q)},type:"POST",url:r}).then(function(a){return JSON.parse(a)})},k=function(a){var b=a.conditionalFilters,c=a.currentPage,f=a.engineName,g=a.excludeFilters,h=a.excludeSearchFields,i=a.facets,j=a.groupField,k=a.includeFilters,l=a.includeSearchFields,m=a.recordAnalytics,n=a.resultsPerPage,o=a.searchString,p=a.sortFilter,q=a.tags,r=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"/api/search";return(0,d.Z)({data:{conditional_filters:JSON.stringify(b.map(function(a){var b=a.field,c=a.values;return{field:b,values:JSON.stringify(c)}})),current_page:c,engine_name:f,exclude_filters:JSON.stringify(g.map(function(a){var b=a.field,c=a.values;return{field:b,values:JSON.stringify(c)}})),exclude_search_fields:JSON.stringify(void 0===h?[]:h),facets:JSON.stringify(i),group_field:j,include_filters:JSON.stringify(k.map(function(a){var b=a.field,c=a.values;return{field:b,values:JSON.stringify(c)}})),include_search_fields:JSON.stringify(void 0===l?[]:l),record_analytics:m,results_per_page:n,search_string:o.slice(0,e.dI),sort_filter:JSON.stringify(void 0===p?[]:p),tags:JSON.stringify(void 0===q?[]:q),from_engine:!1},type:"POST",url:r}).then(function(a){return JSON.parse(a)})}},96723:function(a,b,c){c.d(b,{C:function(){return e}});var d=c(67481),e=function(){return{heading:"Access Denied",message:"You do not have permission to view this page",flagCode:d.Wy.accessDeniedException.toString()}}},4573:function(a,b,c){c.d(b,{AQ:function(){return n},Zv:function(){return o},cy:function(){return m},jx:function(){return i},r3:function(){return h},sC:function(){return j},yF:function(){return g}});var d=c(96022),e=c(35239),f=c(20110),g=!1,h=(0,e.ZP)()||(0,e.hN)()||(0,e.yv)()||g&&(f.env.REACT_APP_STANDALONE||(0,e.a8)()),i="/hocuspocus-websocket",j=8890,k=function(){var a=window.location.host,b=a.split(".");if(b.length<=2)return a;var c=["x","d"].includes(b[b.length-3])?-3:-2;return b.slice(c).join(".")},l=function(a){var b=arguments.length>1&& void 0!==arguments[1]&&arguments[1];return(0,e.ZP)()||(0,e.hN)()||(0,e.yv)()?"".concat("editor",".").concat(k()):b&&g?"".concat(window.location.host).concat(i):"0.0.0.0:".concat(a)},m=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:j,b=l(a);return"".concat((0,e.a8)()?"http":"https","://").concat(b)},n=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:j,b=!(arguments.length>1)|| void 0===arguments[1]||arguments[1],c=l(a,b);return"".concat((0,e.a8)()?"ws":"wss","://").concat(c)},o=function(a,b){return b===d.YE.CONNECTED&&Date.now()-a.configuration.websocketProvider.lastMessageReceived<7e3}},90079:function(a,b,c){c.d(b,{D:function(){return j}});var d=c(54551),e=c.n(d),f=c(31414);function g(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}var h,i,j=(i=(h=e().mark(function a(b,c,d,g){var h,i,j,k,l;return e().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return h=b.body.getReader(),i=new TextDecoder,j=!!d,a.next=5,h.read();case 5:k=a.sent,g||(g={current:!1}),a.prev=7;case 8:if(!(!g.current&&!k.done)){a.next=16;break}return l=i.decode(k.value,{stream:!0}),j?(d(l),j=!1):c(l),a.next=13,h.read();case 13:k=a.sent,a.next=8;break;case 16:a.next=22;break;case 18:throw a.prev=18,a.t0=a.catch(7),(0,f.uX)("Error in magicbox stream:",a.t0),a.t0;case 22:case"end":return a.stop()}},a,null,[[7,18]])}),function(){var a=this,b=arguments;return new Promise(function(c,d){var e=h.apply(a,b);function f(a){g(e,c,d,f,i,"next",a)}function i(a){g(e,c,d,f,i,"throw",a)}f(void 0)})}),function(a,b,c,d){return i.apply(this,arguments)})}}])
//# sourceMappingURL=https://js.educative.io/static/_next/sourcemaps/static/chunks/96022-4da30b03ee45ebf4.js.map